<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:ToolPocket.ViewModels"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:conv="using:ToolPocket.Converters"
        mc:Ignorable="d"
        MinWidth="650"
        MinHeight="400"
        Width="650"
        Height="400"
        x:Class="ToolPocket.Views.AddToolDialog"
        x:DataType="vm:AddToolDialogViewModel"
        x:Name="RootWindow"
        ShowInTaskbar="False"
        WindowStartupLocation="CenterScreen"
        Title="Add a Tool">

    <!--
    <Window.DataContext>
        <vm:AddToolDialogViewModel />
    </Window.DataContext>
    -->

    <Window.Resources>
        <conv:BoolToYesNoConverter x:Key="BoolToYesNoConverter" />
    </Window.Resources>

    <Window.Styles>
        <Style Selector="ToolTip">
            <Setter Property="Background" Value="#333" />
            <Setter Property="Foreground" Value="White" />
            <Setter Property="Padding" Value="8,4" />
            <Setter Property="CornerRadius" Value="0" />
        </Style>

        <Style Selector="TextBlock.AppCardTextBlock, TextBlock.AppCardTagTextBlock">
            <Setter Property="Foreground" Value="White" />
            <Setter Property="VerticalAlignment" Value="Center" />
            <Setter Property="HorizontalAlignment" Value="Center" />
        </Style>

        <Style Selector="TextBlock.AppCardTagTextBlock">
            <Setter Property="FontSize" Value="12" />
            <Setter Property="Foreground" Value="Gray" />
            <Setter Property="Margin" Value="4" />
            <Setter Property="Padding" Value="4" />
        </Style>

        <Style Selector="Label">
            <Setter Property="Margin"
                    Value="5" />
        </Style>
        <Style Selector="TextBox">
            <Setter Property="Margin"
                    Value="0,0,0,15" />
        </Style>
        <Style Selector="Grid.InnerGrid">
            <Setter Property="Margin"
                    Value="5" />
        </Style>
        <Style Selector="Button">
            <Setter Property="Background"
                    Value="LightGray" />
            <Setter Property="Margin"
                    Value="5" />
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="Gray"
                                      Opacity="5"
                                      BlurRadius="5" />
                </Setter.Value>
            </Setter>
            <Setter Property="CornerRadius"
                    Value="5" />
        </Style>
        <Style Selector="Button.AddButton">
            <Setter Property="Background"
                    Value="#4F772D" />
            <Setter Property="Margin"
                    Value="5" />
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="Gray"
                                      Opacity="5"
                                      BlurRadius="5" />
                </Setter.Value>
            </Setter>
            <Setter Property="CornerRadius"
                    Value="5" />
        </Style>

        <!-- ScrollBar with no expansion - targeting all possible states -->

        <!-- Base scrollbar dimensions -->
        <Style Selector="ScrollBar">
            <Setter Property="ShowDelay" Value="0" />
            <Setter Property="HideDelay" Value="0" />
            <Setter Property="Width" Value="11" />
            <Setter Property="MinWidth" Value="11" />
            <Setter Property="MaxWidth" Value="11" />
        </Style>

        <!-- Remove any transitions/animations that might cause expansion -->
        <Style Selector="ScrollBar Thumb:pressed">
            <Setter Property="CornerRadius" Value="12" />
        </Style>

        <!-- Hide scroll buttons -->
        <Style Selector="ScrollBar RepeatButton">
            <Setter Property="IsVisible" Value="False" />
        </Style>
    </Window.Styles>

    <Grid ColumnDefinitions="5*, 5*">
        <Grid RowDefinitions="*,*">
            <StackPanel Grid.Row="0"
                        Margin="20">
                <Label>Enter the app's executable path(.exe) :</Label>
                <Grid ColumnDefinitions="*,32">
                    <TextBox Name="AppPath"
                             Grid.Column="0"
                             Margin="0,0,8,0"
                             FontSize="17"
                             Text="{Binding AppPath, Mode=OneWayToSource}" />
                    <Button Name="DirectoryButton"
                            Grid.Column="1"
                            Margin="0,0,0,4"
                            Width="35"
                            Height="30"
                            VerticalAlignment="Center"
                            HorizontalAlignment="Center"
                            VerticalContentAlignment="Center"
                            HorizontalContentAlignment="Center"
                            IsEnabled="True">
                        <Image Source="../Assets/icons8-opened-folder-50.png"
                               Height="20"
                               Width="20"
                               VerticalAlignment="Center"
                               HorizontalAlignment="Center" />
                    </Button>
                </Grid>
                <Label>Enter the app's name :</Label>
                <TextBox Name="AppName"
                         FontSize="17"
                         Text="{Binding AppName, Mode=OneWayToSource}" />
                <Grid ColumnDefinitions="*,*"
                      Classes="InnerGrid">
                    <Label Grid.Column="0"
                           Content="Run On StartUp :" />
                    <ToggleSwitch Name="RunOnStartUpToggle"
                                  Grid.Column="1"
                                  HorizontalAlignment="Right"
                                  IsChecked="{Binding RunOnStartUp, Mode=TwoWay}" />
                </Grid>
                <Grid ColumnDefinitions="*,*"
                      Classes="InnerGrid">
                    <Label Grid.Column="0"
                           Content="Add To Programs :" />
                    <ToggleSwitch Name="AddToProgramsToggle"
                                  Grid.Column="1"
                                  HorizontalAlignment="Right"
                                  IsChecked="{Binding AddToPrograms, Mode= TwoWay}" />
                </Grid>
                <Grid ColumnDefinitions="*,*"
                      Classes="InnerGrid">
                    <Label Grid.Column="0"
                           Content="Add To Start:" />
                    <ToggleSwitch Name="AddToStartToggle"
                                  Grid.Column="1"
                                  HorizontalAlignment="Right"
                                  IsChecked="{Binding AddToStart, Mode= TwoWay}" />
                </Grid>
            </StackPanel>
            <Grid Grid.Row="1"
                  ColumnDefinitions="*,*"
                  Classes="InnerGrid">
                <Button Grid.Column="0"
                        Classes="AddButton"
                        Content="Add"
                        Name="AddToolConfirmButton"
                        Foreground="#ffffff"
                        Margin="20"
                        Width="80"
                        HorizontalContentAlignment="Center"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Bottom"
                        Command="{Binding AddNewApp}" />
                <Button Grid.Column="1"
                        Content="Confirm"
                        Name="AddToolCancelButton"
                        Margin="20"
                        Width="80"
                        HorizontalContentAlignment="Center"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Bottom"
                        Command="{Binding Confirm}" />
            </Grid>
        </Grid>
        <Border
            Grid.Column="1"
            Padding="8"
            Background="#23201B">
            <ScrollViewer
                Name="NewAppsScrollViewer">
                <ItemsControl
                    x:Name="NewAppsList"
                    ItemsSource="{Binding NewApps}">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Border
                                Name="AppCard"
                                CornerRadius="8"
                                Background="#0B0B0B"
                                BorderBrush="Black"
                                BorderThickness="1"
                                Padding="10"
                                Margin="4,4,4,4">
                                <Border.Styles>
                                    <Style
                                        Selector="Border:pointerover">
                                        <Setter
                                            Property="RenderTransform">
                                            <TranslateTransform
                                                Y="-4" />
                                        </Setter>
                                    </Style>
                                </Border.Styles>
                                <StackPanel>
                                    <Grid ColumnDefinitions="*,*,*" Margin="0,0,0,8">
                                        <TextBlock
                                            Name="RunOnStartUpTag"
                                            Classes="AppCardTagTextBlock"
                                            ToolTip.Tip="Run on Startup"
                                            ToolTip.ShowDelay="0"
                                            Grid.Column="0"
                                            Text="{Binding RunOnStartUp, Converter={StaticResource BoolToYesNoConverter}, StringFormat='ROS: {0}'}">
                                            Run on Startup
                                        </TextBlock>

                                        <TextBlock
                                            Name="AddToProgramsTag"
                                            Classes="AppCardTagTextBlock"
                                            ToolTip.Tip="Add to Programs"
                                            ToolTip.ShowDelay="0"
                                            Grid.Column="1"
                                            Text="{Binding RunOnStartUp, Converter={StaticResource BoolToYesNoConverter}, StringFormat='AOP: {0}'}" />
                                        <TextBlock
                                            Name="AddToStartTag"
                                            Classes="AppCardTagTextBlock"
                                            ToolTip.Tip="Add to Start"
                                            ToolTip.ShowDelay="0"
                                            Grid.Column="2"
                                            Text="{Binding RunOnStartUp, Converter={StaticResource BoolToYesNoConverter}, StringFormat='AOS: {0}'}" />
                                    </Grid>
                                    <Grid ColumnDefinitions="Auto,*">
                                        <TextBlock x:Name="Name"
                                                   Classes="AppCardTextBlock"
                                                   Grid.Column="0"
                                                   Text="{Binding AppName}" />
                                        <StackPanel Grid.Column="1" Orientation="Horizontal"
                                                    HorizontalAlignment="Right"
                                                    VerticalAlignment="Center"
                                                    FlowDirection="LeftToRight"
                                                    Spacing="8">
                                            <Button Content="Remove"
                                                    Margin="0"
                                                    Command="{Binding RemoveApp}" />
                                        </StackPanel>
                                    </Grid>
                                </StackPanel>
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </ScrollViewer>
        </Border>
    </Grid>

</Window>